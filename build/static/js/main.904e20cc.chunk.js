(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=t(4),l=t(5),s=t(2),i=function(e){return r.a.createElement("div",{className:"c-filter"},r.a.createElement("h3",{className:"c-filter__heading"},"Search Contacts"),r.a.createElement("div",{className:"c-form-row"},r.a.createElement("input",{id:"filter",className:"c-form-row__input",onChange:e.handleFilterChange,value:e.value,placeholder:"Enter name..."})))},m=function(e){return r.a.createElement("div",null,r.a.createElement("form",{className:"c-person-form",onSubmit:e.handleSubmit},r.a.createElement("h3",{className:"c-person-form__heading"},"Add a New Contact"),r.a.createElement("div",{className:"c-form-row"},r.a.createElement("label",{htmlFor:"name",className:"c-form-row__label"},"Name:"),r.a.createElement("input",{id:"name",className:"c-form-row__input",onChange:e.handleNameChange,value:e.nameValue})),r.a.createElement("div",{className:"c-form-row"},r.a.createElement("label",{htmlFor:"number",className:"c-form-row__label"},"Number:"),r.a.createElement("input",{id:"number",className:"c-form-row__input",onChange:e.handleNumberChange,value:e.numberValue})),r.a.createElement("div",{className:"c-person-form__submit"},r.a.createElement("button",{className:"c-btn",type:"submit"},"Add"))))},f=function(e){return r.a.createElement("div",{className:"c-person"},r.a.createElement("span",{className:"c-person__detail"},r.a.createElement("span",{className:"u-bold"},e.name,":")),r.a.createElement("span",{className:"c-person__detail"},r.a.createElement("span",{className:"u-italic"},e.number,", ")),r.a.createElement("div",{className:"c-person__delete"},r.a.createElement("div",{className:"c-person__delete-btn"},r.a.createElement("button",{className:"c-btn c-btn--danger","data-id":e.id,onClick:e.handleClick},"Delete"))))},d=function(e){var n=e.persons,t=e.handleClick,a=n.map((function(e){return r.a.createElement(f,{key:e.id,id:e.id,name:e.name,number:e.number,handleClick:t})}));return r.a.createElement("div",{className:"c-persons"},r.a.createElement("h3",{className:"c-persons__heading"},"Contact List"),a)},p=function(e){var n=e.timeoutFunc,t=e.id,c=e.type,o=e.message,u={error:"c-alert--error",success:"c-alert--success",info:"c-alert--info"};if(!u[c])throw new Error("Invalid Alert Type");var l=function(){return n(t)};return Object(a.useEffect)((function(){setTimeout(l,3e3)})),r.a.createElement("div",{className:"c-alert ".concat(u[c])},r.a.createElement("span",{className:"c-alert__txt"},o))},b=t(3),h=t.n(b),v="/api/persons",E=function(e){return h.a.post(v,e).then((function(e){return e.data}))},N=function(){return h.a.get(v).then((function(e){return e.data}))},g=function(e,n){return h.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},_=function(e){return h.a.delete("".concat(v,"/").concat(e))},w=t(16),C=t.n(w)()(1,1e4),y=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),f=Object(s.a)(o,2),b=f[0],h=f[1],v=Object(a.useState)(""),w=Object(s.a)(v,2),y=w[0],O=w[1],j=Object(a.useState)(""),k=Object(s.a)(j,2),F=k[0],S=k[1],P=Object(a.useState)([]),A=Object(s.a)(P,2),V=A[0],D=A[1];Object(a.useEffect)((function(){N().then((function(e){c(e)}))}),[]);var L=t.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())})),T=function(e,n){switch(n){case"nameFilter":S(e.target.value);break;case"name":h(e.target.value);break;case"number":O(e.target.value)}},U=function(){h(""),O("")},x=function(e){(e.preventDefault(),t.some((function(e){return e.name===b})))?function(){var e=t.find((function(e){return e.name===b}));if(window.confirm("".concat(e.name," is alrady added to the phonebook, ")+"replace the old number with a new one?")){var n=Object(l.a)({},e,{number:y}),a=e.id;return g(a,n).then((function(e){return c(t.map((function(n){return n.id!==a?n:e}))),J([{type:"info",message:"".concat(e.name,"'s number updated to ").concat(e.number)}]),!0})).catch((function(n){J([{type:"error",message:'Contact "'.concat(e.name,'" has already been removed from server')}]),c(t.filter((function(e){return e.id!==a})))}))}return Promise.resolve(!1)}().then((function(e){e?console.log("Person Updated Successfully"):e||console.log("User Opted Not To Update Person"),U()})):E({name:b,number:y}).then((function(e){c(t.concat(e)),J([{type:"success",message:'Added "'.concat(e.name,'"')}])})).catch((function(e){!function(e){var n=e.response.data.messages;if(!(n.length>0))throw e;var t=n.map((function(e){return{type:"error",message:e}}));J(t)}(e)})).finally((function(){return U()}))},I=function(e,n){switch(n){case"deletePerson":var a=e.target.dataset.id;if(Number.isNaN(a)||!a)break;var r=t.find((function(e){return e.id===a}));window.confirm("Delete ".concat(r.name,"?"))&&(!function(e){var n=!0;_(e).catch((function(e){console.log(e),n=!1})).finally((function(){n&&c(t.filter((function(n){return n.id!==e})))}))}(a),J([{type:"info",message:'Removed "'.concat(r.name,'" from contact list')}]))}},J=function(e){var n=function(e){return D((function(n){return n.filter((function(n){return n.id!==e}))}))},t=e.map((function(e){return Object(l.a)({},e,{id:"".concat(e.type,"-").concat(C()),timeoutFunc:n})}));D([].concat(Object(u.a)(V),Object(u.a)(t)))},B=V.map((function(e){return r.a.createElement(p,{timeoutFunc:e.timeoutFunc,key:e.id,id:e.id,type:e.type,message:e.message})}));return r.a.createElement("div",{className:"o-wrapper"},r.a.createElement("h2",null,"Phonebook"),B,r.a.createElement(m,{nameValue:b,numberValue:y,handleSubmit:function(e){return x(e)},handleNameChange:function(e){return T(e,"name")},handleNumberChange:function(e){return T(e,"number")}}),r.a.createElement(i,{handleFilterChange:function(e){return T(e,"nameFilter")},value:F}),r.a.createElement(d,{persons:L,handleClick:function(e){return I(e,"deletePerson")}}))};t(39);o.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.904e20cc.chunk.js.map